<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EcoVisionary</title>
    <link
      rel="shortcut icon"
      href="../Public/Images/xml.png"
      type="image/svg+xml"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
  />
    <link rel="stylesheet" href="/public/cart.css" />
  </head>
  <body>
    <!-- NAVBAR -->
    <header class="navbar navbar-expand-md navbar-light bg-light d-flex align-items-center justify-content-between py-3" id="navBar">
      <div class="d-flex align-items-center col-6 col-md-3 mb-2 mb-md-0 ms-5">
        <a href="/" class="d-inline-flex link-body-emphasis text-decoration-none">
          <img src="../Public/Images/Screenshot_2025-01-23_010224-removebg-preview.png" alt="" width="100" height="auto" />
        </a>
      </div>
    
      <div class="d-flex align-items-center d-md-none me-3">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fa-solid fa-bars"></i>
        </button>
        <button type="button" class="btn-darkmode-toggle ms-2" id="darkModeToggle" onclick="toggleDarkMode()">
          <i class="bx bx-moon"></i>
        </button>
        <a href="#" onclick="window.location.href='/cart'">
          <img src="../Public/Images/cart.png" alt="" width="45px" style="margin-bottom: 5px; margin-left: 5px" />
        </a>
      </div>
    
      <div class="collapse navbar-collapse ms-5" id="navbarNav">
        <ul class="nav flex-column flex-md-row justify-content-center" id="nav-links">
          <li class="nav-item">
            <a href="#" class="nav-link nav-link-custom px-2 active" id="navBarList" onclick="window.location.href='/home'">Home</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link nav-link-custom px-2" id="navBarList" onclick="window.location.href='/about'">About Us</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link nav-link-custom px-2" id="navBarList" onclick="window.location.href='/products'">Products</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link nav-link-custom px-2" id="navBarList" onclick="window.location.href='/services'">Services</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link nav-link-custom px-2" id="navBarList" onclick="window.location.href='/support'">Support Center</a>
          </li>
          <li class="nav-item d-md-none-except-user-icon">
            <a href="#" class="nav-link nav-link-custom px-2" id="navBarList" onclick="redirectToDashboard()">
              <img src="../Public/Images/user-icon.png" alt="" width="30px" style="margin-bottom: 5px; margin-left: 5px" />
            </a>
          </li>
        </ul>
      </div>
    
      <div class="d-none d-md-flex align-items-center me-5">
        <button type="button" class="btn-darkmode-toggle" id="darkModeToggle" onclick="toggleDarkMode()">
          <i class="bx bx-moon"></i>
        </button>
        <a href="#" onclick="window.location.href='/cart'">
          <img src="../Public/Images/cart.png" alt="" width="45px" style="margin-bottom: 5px; margin-left: 5px" />
        </a>
        <a href="#" onclick="redirectToDashboard()">
          <img src="../Public/Images/user-icon.png" alt="" width="30px" style="margin-bottom: 5px; margin-left: 5px" class="d-md-none-user" />
        </a>
      </div>
    </header>
    

    <!-- Main Body -->
    <div class="container mt-5 mb-5">
        <div class="card">
          <div class="card-header">
            <h3 class="mb-0">Shopping Cart</h3>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Product Name</th>
                    <th>Image</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="cartTableBody">
                  <!-- Dynamic product rows will be inserted here -->
                </tbody>
                <tfoot>
                  <tr class="total-row">
                    <td colspan="5" class="text-end"><strong>Total:</strong></td>
                    <td class="price-column"><strong id="cartTotal">$0.00</strong></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <div class="text-end mt-4">
              <button class="btn btn-primary btn-lg checkout-btn" onclick="window.location.href='/checkout'">Proceed to Checkout</button>
            </div>
          </div>
        </div>
      </div>

    <!-- FOOTER -->
    <div class="footer-container">
      <div class="col-md-1 mt-2 mb-md-0 ms-5">
        <a href="/">
          <img
            src="../Public/Images/Screenshot_2025-01-23_010224-removebg-preview.png"
            alt=""
            class="logo"
            width="120"
            height="auto"
          />
        </a>
      </div>
      <div class="container">
        <footer class="py-5">
          <div class="row">
            <div class="col-6 col-md-2 mb-3">
              <h5>COMPANY</h5>
              <ul class="nav flex-column">
                <li class="nav-item mb-2">
                  <a href="/home" class="nav-link p-0">Home</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="#" class="nav-link p-0">Features</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="#" class="nav-link p-0">Reviews</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="/about" class="nav-link p-0">About Us</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="/services" class="nav-link p-0">Services</a>
                </li>
              </ul>
            </div>

            <div class="col-6 col-md-2 mb-3">
              <h5>SHOP</h5>
              <ul class="nav flex-column">
                <li class="nav-item mb-2">
                  <a href="/products" class="nav-link p-0">Products</a>
                </li>
              </ul>
            </div>

            <div class="col-6 col-md-2 mb-3">
              <h5>HELP</h5>
              <ul class="nav flex-column">
                <li class="nav-item mb-2">
                  <a href="/support" class="nav-link p-0">Support Center</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="#" class="nav-link p-0">Teams & Conditions</a>
                </li>
                <li class="nav-item mb-2">
                  <a href="#" class="nav-link p-0">Blogs</a>
                </li>
              </ul>
            </div>

            <div class="col-md-5 offset-md-1 mb-3">
              <form>
                <h5>Subscribe to our newsletter</h5>
                <p>Monthly digest of what's new and exciting from us.</p>
                <div class="d-flex flex-column flex-sm-row w-100 gap-2">
                  <label for="newsletter1" class="visually-hidden"
                    >Email address</label
                  >
                  <input
                    id="newsletter1"
                    type="text"
                    class="form-control"
                    placeholder="Email address"
                  />
                  <button class="btn btn-primary" type="button">
                    Subscribe
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div
            class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top border-success"
          >
            <p>Â© 2024 Company, Inc. All rights reserved.</p>
            <ul class="list-unstyled d-flex">
              <li class="ms-3">
                <a class="link-body-emphasis" href="#"
                  ><img
                    src="../Public/Images/fb icon.png"
                    alt=""
                    width="24"
                    height="24"
                /></a>
              </li>
              <li class="ms-3">
                <a class="link-body-emphasis" href="#"
                  ><img
                    src="../Public/Images/insta icon.png"
                    alt=""
                    width="30"
                    height="30"
                /></a>
              </li>
              <li class="ms-3">
                <a class="link-body-emphasis" href="#"
                  ><img
                    src="../Public/Images/x icon.png"
                    alt=""
                    width="30"
                    height="30"
                /></a>
              </li>
            </ul>
          </div>
        </footer>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init();

      const toggleDarkMode = () => {
        const body = document.body;
        body.classList.toggle("dark-mode");
        const toggleButton = document.getElementById("darkModeToggle");
        if (body.classList.contains("dark-mode")) {
          toggleButton.innerHTML = "<i class='bx bx-sun'></i>";
          localStorage.setItem("theme", "dark");
        } else {
          toggleButton.innerHTML = "<i class='bx bx-moon'></i>";
          localStorage.setItem("theme", "light");
        }
      };

      window.onload = () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark-mode");
          document.getElementById("darkModeToggle").innerHTML =
            "<i class='bx bx-sun'></i>";
        }
      };

      // Function to display cart items
  function displayCartItems() {
    const cartTableBody = document.getElementById('cartTableBody');
    const cartTotal = document.getElementById('cartTotal');
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    if (cart.length === 0) {
      cartTableBody.innerHTML = '<tr><td colspan="6">Your cart is empty.</td></tr>';
      cartTotal.textContent = '$0.00';
      return;
    }

    let total = 0;
    cartTableBody.innerHTML = ''; // Clear existing rows

    cart.forEach((item, index) => {
      const itemPrice = parseFloat(item.price.replace('$', ''));
      const itemSubtotal = itemPrice * item.quantity;
      total += itemSubtotal;

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${item.name}</td>
        <td><img src="${item.image}" alt="${item.name}" style="width: 100px; height: 100px;"></td>
        <td>${item.price}</td>
        <td>
          <input type="number" class="form-control quantity-input" style="width: 80px" value="${item.quantity}" min="1" data-index="${index}">
        </td>
        <td class="price-column">$${itemSubtotal.toFixed(2)}</td>
        <td>
          <button class="remove-btn" data-index="${index}">
            <i class="fas fa-trash-alt"></i> Remove
          </button>
        </td>
      `;
      cartTableBody.appendChild(row);
    });

    cartTotal.textContent = `$${total.toFixed(2)}`;

    // Add event listeners to quantity inputs
    document.querySelectorAll('.quantity-input').forEach(input => {
      input.addEventListener('change', (event) => {
        const index = event.target.getAttribute('data-index');
        const quantity = parseInt(event.target.value);
        if (quantity > 0) {
          cart[index].quantity = quantity;
          localStorage.setItem('cart', JSON.stringify(cart));
          displayCartItems(); // Refresh the cart display
        }
      });
    });

    // Add event listeners to remove buttons
    document.querySelectorAll('.remove-btn').forEach(button => {
      button.addEventListener('click', (event) => {
        const index = event.target.getAttribute('data-index');
        cart.splice(index, 1); // Remove the item from the cart
        localStorage.setItem('cart', JSON.stringify(cart));
        displayCartItems(); // Refresh the cart display
      });
    });
  }

  // Call the function to display cart items when the page loads
  displayCartItems();

  function redirectToDashboard() {
  const currentUser = sessionStorage.getItem('currentUser');
  if (currentUser) {
    window.location.href = '/dashboard';
  } else {
    window.location.href = '/login';
  }
}
    </script>
  </body>
</html>
