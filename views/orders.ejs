<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EcoVisionary</title>
    <link
      rel="shortcut icon"
      href="../Public/Images/xml.png"
      type="image/svg+xml"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
  />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../public/orders.css" />
  </head>
  <body onload="retrieveOrderDetails()">
    <!-- NAVBAR -->
    <header
      class="navbar navbar-expand-md navbar-light bg-light d-flex align-items-center justify-content-between py-3"
      id="navBar"
    >
      <div
        class="img-d d-flex align-items-center col-6 col-md-3 mb-2 mb-md-0 ms-5"
      >
        <a
          href="/"
          class="d-inline-flex link-body-emphasis text-decoration-none"
        >
          <img
            src="../Public/Images/Screenshot_2025-01-23_010224-removebg-preview.png"
            alt=""
            width="100"
            height="auto"
            class="logo"
          />
        </a>
      </div>

      <div class="d-flex align-items-center d-md-none me-3">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fa-solid fa-bars"></i>
        </button>
        <button
          type="button"
          class="btn-darkmode-toggle ms-2"
          id="darkModeToggle"
          onclick="toggleDarkMode()"
        >
          <i class="bx bx-moon"></i>
        </button>
        <a href="#" onclick="window.location.href='/cart'">
          <img
            src="../Public/Images/cart.png"
            alt=""
            width="45px"
            style="margin-bottom: 5px; margin-left: 5px"
          />
        </a>
      </div>

      <div class="collapse navbar-collapse ms-4" id="navbarNav">
        <ul
          class="nav flex-column flex-md-row justify-content-center"
          id="nav-links"
        >
          <li class="nav-item">
            <a
              href="#"
              class="nav-link nav-link-custom px-2 active"
              id="navBarList"
              onclick="window.location.href='/home'"
              >Home</a
            >
          </li>
          <li class="nav-item">
            <a
              href="#"
              class="nav-link nav-link-custom px-2"
              id="navBarList"
              onclick="window.location.href='/about'"
              >About Us</a
            >
          </li>
          <li class="nav-item">
            <a
              href="#"
              class="nav-link nav-link-custom px-2"
              id="navBarList"
              onclick="window.location.href='/products'"
              >Products</a
            >
          </li>
          <li class="nav-item">
            <a
              href="#"
              class="nav-link nav-link-custom px-2"
              id="navBarList"
              onclick="window.location.href='/services'"
              >Services</a
            >
          </li>
          <li class="nav-item d-md-none-except-user-icon">
            <a
              href="#"
              class="nav-link nav-link-custom px-2"
              id="navBarList"
              onclick="redirectToDashboard()"
            >
              <img
                src="../Public/Images/user-icon.png"
                alt=""
                width="30px"
                style="margin-bottom: 5px; margin-left: 5px"
              />
            </a>
          </li>
        </ul>
      </div>

      <div class="d-none d-md-flex align-items-center me-5">
        <button
          type="button"
          class="btn-darkmode-toggle"
          id="darkModeToggle"
          onclick="toggleDarkMode()"
        >
          <i class="bx bx-moon"></i>
        </button>
        <a href="#" onclick="window.location.href='/cart'">
          <img
            src="../Public/Images/cart.png"
            alt=""
            width="45px"
            style="margin-bottom: 5px; margin-left: 5px"
          />
        </a>
        <a href="#" onclick="redirectToDashboard()">
          <img
            src="../Public/Images/user-icon.png"
            alt=""
            width="30px"
            style="margin-bottom: 5px; margin-left: 5px"
            class="d-md-none-user"
          />
        </a>
      </div>
    </header>
    

    <!-- Main Body -->
      <div class="main-container container mt-5">
        <div class="mini-header d-flex justify-content-between align-items-center">
          <h6><a href="/dashboard" class="text-muted">Your account</a></h6>
          <h6><span class="text-muted">></span> <a href="#" class="text-muted">Your orders</a></h6>
        </div>
        <div class="sub-header d-flex justify-content-between align-items-center my-3">
          <h3 class="font-weight-bold">Track Your Order</h3>
        </div>
        <div class="below-sub-header d-flex justify-content-around my-3">
          <h5><a href="#" class="text-primary">Orders</a></h5>
          <h5><a href="#" class="text-primary">Buy Again</a></h5>
          <h5><a href="#" class="text-primary">Not Yet Shipped</a></h5>
          <h5><a href="#" class="text-primary">Cancelled Orders</a></h5>
        </div>
        <div class="order-details my-3" id="orderDetails">
          <h5>Order #<span id="orderId">123456789</span></h5>
          <p>Placed on: <span id="orderDate">10 January 2025</span></p>
          <p>Estimated Delivery: <span id="deliveryDate">15 February 2025</span></p>
        </div>
        <div class="progress mb-4" id="progressContainer">
          <div id="progressBar" class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">Order Placed</div>
        </div>
        <div class="tracking-details mb-4" id="trackingDetails">
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Order Placed
              <span class="badge badge-success badge-pill" id="statusPlaced">Pending</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Order Processed
              <span class="badge badge-secondary badge-pill" id="statusProcessed">Pending</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              In Transit
              <span class="badge badge-secondary badge-pill" id="statusTransit">Pending</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Out for Delivery
              <span class="badge badge-secondary badge-pill" id="statusOutForDelivery">Pending</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Delivered
              <span class="badge badge-secondary badge-pill" id="statusDelivered">Pending</span>
            </li>
          </ul>
        </div>
        <div class="drop-list my-3">
          <select class="form-control">
            <option value="last30days">Last 30 days</option>
            <option value="last1month">Last 1 month</option>
            <option value="2025">2025</option>
            <option value="2024">2024</option>
            <option value="2023">2023</option>
            <option value="2022">2022</option>
            <option value="2021">2021</option>
            <option value="2020">2020</option>
            <option value="2019">2019</option>
          </select>
        </div>
      </div>


     <!-- FOOTER -->
     <div class="footer-container">
        <div class="col-md-1 mt-2 mb-md-0 ms-5">
          <a href="/">
            <img
              src="../Public/Images/Screenshot_2025-01-23_010224-removebg-preview.png"
              alt=""
              class="logo"
              width="120"
              height="auto"
            />
          </a>
        </div>
        <div class="container">
          <footer class="py-5">
            <div class="row">
              <div class="col-6 col-md-2 mb-3">
                <h5>COMPANY</h5>
                <ul class="nav flex-column">
                  <li class="nav-item mb-2">
                    <a href="/home" class="nav-link p-0">Home</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="#" class="nav-link p-0">Features</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="#" class="nav-link p-0">Reviews</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="/about" class="nav-link p-0">About Us</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="/services" class="nav-link p-0">Services</a>
                  </li>
                </ul>
              </div>
  
              <div class="col-6 col-md-2 mb-3">
                <h5>SHOP</h5>
                <ul class="nav flex-column">
                  <li class="nav-item mb-2">
                    <a href="/products" class="nav-link p-0">Products</a>
                  </li>
                </ul>
              </div>
  
              <div class="col-6 col-md-2 mb-3">
                <h5>HELP</h5>
                <ul class="nav flex-column">
                  <li class="nav-item mb-2">
                    <a href="/support" class="nav-link p-0">Support Center</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="#" class="nav-link p-0">Teams & Conditions</a>
                  </li>
                  <li class="nav-item mb-2">
                    <a href="#" class="nav-link p-0">Blogs</a>
                  </li>
                </ul>
              </div>
  
              <div class="col-md-5 offset-md-1 mb-3">
                <form>
                  <h5>Subscribe to our newsletter</h5>
                  <p>Monthly digest of what's new and exciting from us.</p>
                  <div class="d-flex flex-column flex-sm-row w-100 gap-2">
                    <label for="newsletter1" class="visually-hidden"
                      >Email address</label
                    >
                    <input
                      id="newsletter1"
                      type="text"
                      class="form-control"
                      placeholder="Email address"
                    />
                    <button class="btn btn-primary" type="button">
                      Subscribe
                    </button>
                  </div>
                </form>
              </div>
            </div>
  
            <div
              class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top border-success"
            >
              <p>© 2024 Company, Inc. All rights reserved.</p>
              <ul class="list-unstyled d-flex">
                <li class="ms-3">
                  <a class="link-body-emphasis" href="#"
                    ><img
                      src="../Public/Images/fb icon.png"
                      alt=""
                      width="24"
                      height="24"
                  /></a>
                </li>
                <li class="ms-3">
                  <a class="link-body-emphasis" href="#"
                    ><img
                      src="../Public/Images/insta icon.png"
                      alt=""
                      width="30"
                      height="30"
                  /></a>
                </li>
                <li class="ms-3">
                  <a class="link-body-emphasis" href="#"
                    ><img
                      src="../Public/Images/x icon.png"
                      alt=""
                      width="30"
                      height="30"
                  /></a>
                </li>
              </ul>
            </div>
          </footer>
        </div>
      </div>

    <script src="/docs/5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init();

      const toggleDarkMode = () => {
        const body = document.body;
        body.classList.toggle("dark-mode");
        const toggleButton = document.getElementById("darkModeToggle");
        if (body.classList.contains("dark-mode")) {
          toggleButton.innerHTML = "<i class='bx bx-sun'></i>";
          localStorage.setItem("theme", "dark");
        } else {
          toggleButton.innerHTML = "<i class='bx bx-moon'></i>";
          localStorage.setItem("theme", "light");
        }
      };

      window.onload = () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark-mode");
          document.getElementById("darkModeToggle").innerHTML =
            "<i class='bx bx-sun'></i>";
        }
      };
      

     // Generate a random order ID
function generateOrderId() {
  return Math.floor(Math.random() * 1000000000).toString();
}

// Set order details on checkout
function setOrderDetails() {
  const orderId = generateOrderId();
  const orderDate = new Date().toLocaleDateString('en-GB', {
    day: 'numeric', month: 'long', year: 'numeric'
  });

  sessionStorage.setItem('orderId', orderId);
  sessionStorage.setItem('orderDate', orderDate);
  window.location.href = 'order.html';
}

// Simulate order progress
function simulateOrderProgress(daysElapsed, deliveryDays) {
  const progressBar = document.getElementById('progressBar');
  const statusPlaced = document.getElementById('statusPlaced');
  const statusProcessed = document.getElementById('statusProcessed');
  const statusTransit = document.getElementById('statusTransit');
  const statusOutForDelivery = document.getElementById('statusOutForDelivery');
  const statusDelivered = document.getElementById('statusDelivered');

  const totalStages = 5;
  const stageDuration = deliveryDays / totalStages;
  let progress = Math.min((daysElapsed / deliveryDays) * 100, 100);

  function updateProgressBar() {
    if (progress >= 100) {
      progressBar.textContent = 'Order Delivered';
      statusDelivered.textContent = 'Completed';
      statusDelivered.className = 'badge badge-success badge-pill';
      clearInterval(progressInterval);
      return;
    }

    progressBar.style.width = `${progress}%`;
    progressBar.setAttribute('aria-valuenow', progress);

    if (progress < 20) {
      progressBar.textContent = 'Order Placed';
      statusPlaced.textContent = 'Completed';
      statusPlaced.className = 'badge badge-success badge-pill';
    } else if (progress < 40) {
      progressBar.textContent = 'Order Processed';
      statusProcessed.textContent = 'Completed';
      statusProcessed.className = 'badge badge-success badge-pill';
    } else if (progress < 60) {
      progressBar.textContent = 'In Transit';
      statusTransit.textContent = 'Completed';
      statusTransit.className = 'badge badge-success badge-pill';
    } else if (progress < 80) {
      progressBar.textContent = 'Out for Delivery';
      statusOutForDelivery.textContent = 'Completed';
      statusOutForDelivery.className = 'badge badge-success badge-pill';
    } else {
      progressBar.textContent = 'Order Delivered';
      statusDelivered.textContent = 'Completed';
      statusDelivered.className = 'badge badge-success badge-pill';
    }
  }

  const progressInterval = setInterval(() => {
    daysElapsed += stageDuration;
    progress = Math.min((daysElapsed / deliveryDays) * 100, 100);
    updateProgressBar();
  }, 2000);

  updateProgressBar();
}

// Retrieve order details from local storage
function retrieveOrderDetails() {
  const orderId = sessionStorage.getItem('orderId');
  const orderDate = sessionStorage.getItem('orderDate');
  const currentDate = new Date();
  const placedDate = new Date(orderDate);
  const daysElapsed = (currentDate - placedDate) / (1000 * 60 * 60 * 24);
  const deliveryDays = 10;
  const deliveryDate = new Date(placedDate.getTime() + deliveryDays * 24 * 60 * 60 * 1000);
  const formattedDeliveryDate = deliveryDate.toLocaleDateString('en-GB', {
    day: 'numeric', month: 'long', year: 'numeric'
  });

  if (orderId && orderDate) {
    document.getElementById('orderId').textContent = orderId;
    document.getElementById('orderDate').textContent = orderDate;
    document.getElementById('deliveryDate').textContent = formattedDeliveryDate;
    simulateOrderProgress(daysElapsed, deliveryDays);
  } else {
    document.getElementById('orderDetails').style.display = 'none';
    document.getElementById('progressContainer').style.display = 'none';
    document.getElementById('trackingDetails').style.display = 'none';
    alert('No order details found.');
  }
}

// Check if user is already logged in (Optional)
window.onload = function () {
  const currentUser = sessionStorage.getItem('currentUser');
  if (currentUser && window.location.pathname.includes('dashboard.html')) {
    displayUsername();
  }
};

      function redirectToDashboard() {
  const currentUser = sessionStorage.getItem('currentUser');
  if (currentUser) {
    window.location.href = '/dashboard';
  } else {
    window.location.href = '/login';
  }
}
</script>
</body>
</html>